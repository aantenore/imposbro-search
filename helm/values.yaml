# values.yaml

# Global values
replicaCount: 1
imagePullPolicy: IfNotPresent

# Configuration for the query-api service
queryApi:
  name: query-api
  image: "your-registry/imposbro-query-api:latest" # <-- IMPORTANT: Replace with your Docker image name
  port: 8000
  service:
    type: ClusterIP
    port: 80

# Configuration for the admin-ui service
adminUi:
  name: admin-ui
  image: "your-registry/imposbro-admin-ui:latest" # <-- IMPORTANT: Replace with your Docker image name
  port: 3000
  service:
    type: LoadBalancer # Expose this service outside the cluster
    port: 80

# Configuration for the indexing-service (Kafka consumer)
indexingService:
  name: indexing-service
  image: "your-registry/imposbro-indexing-service:latest" # <-- IMPORTANT: Replace with your Docker image name
  replicaCount: 1

# Configuration for backend services (Kafka, Typesense, Redis)
# For a production setup, these should come from external Helm charts (as dependencies)
# or be managed services from your cloud provider.
kafka:
  name: kafka
  port: 9092

typesense:
  name: typesense
  port: 8108
  replica:
    name: typesense-replica
    port: 8108

redis:
  name: redis
  port: 6379

# Centralized configuration for environment variables
# Non-sensitive values go to ConfigMap; sensitive ones to Secret when useSecret is true.
config:
  useSecret: false  # Set to true and provide secret.* values (e.g. via --set) to use a Secret for credentials
  KAFKA_BROKER_URL: "kafka:9092"
  KAFKA_TOPIC_PREFIX: "imposbro_search_sharded"
  TYPESENSE_HOST: "typesense"
  TYPESENSE_PORT: "8108"
  # For production: use Secrets (config.useSecret: true) and set these via --set or a secure values file
  TYPESENSE_API_KEY: "xyz"
  REDIS_URL: "redis://redis:6379"
  INTERNAL_QUERY_API_URL: "http://query-api:80"
  # Optional: when useSecret is true, these are written to the Secret (same env names the app expects)
  INTERNAL_STATE_API_KEY: ""
  DEFAULT_DATA_CLUSTER_API_KEY: ""
  ADMIN_API_KEY: ""
